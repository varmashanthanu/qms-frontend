<div class="container" *ngIf="!isLoading; else loading">
  <mat-card *ngFor="let ticket of tickets" class="ticket-card">
    <mat-card-title>{{ 'TICKET' | translate }} #{{ ticket.ticket_number }}</mat-card-title>
    <mat-card-content>
      <p>{{ 'STATUS' | translate }}: {{ ticket.status.toUpperCase() | translate }}</p>
      <p>{{ 'CREATED AT' | translate }}: {{ ticket.created_at | date:'short' }}</p>
    </mat-card-content>
    <mat-card-actions>
      <button mat-button class="call" *ngIf="ticket.status === 'pending'"
              (click)="handleAction(ticket.id, 'call')">{{ 'CALL' | translate }}</button>
      <button mat-button class="complete" *ngIf="ticket.status === 'in_progress'"
              (click)="handleAction(ticket.id, 'complete')">{{ 'COMPLETE' | translate }}</button>
      <button mat-button class="skip" *ngIf="ticket.status === 'in_progress'"
              (click)="handleAction(ticket.id, 'skip')">{{ 'SKIP' | translate }}</button>
      <button mat-button class="transfer" *ngIf="ticket.status === 'in_progress'"
              (click)="handleAction(ticket.id, 'transfer')">{{ 'TRANSFER' | translate }}</button>
    </mat-card-actions>
  </mat-card>
</div>

<ng-template #loading>
  <div class="loading">{{ 'LOADING TICKETS' | translate }}...</div>
</ng-template>
